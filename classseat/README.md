# 教室座位预约系统

一个基于前后端分离架构的教室座位预约系统，支持用户注册登录、座位平面图展示、座位预约、预约时间限制和管理员功能。

## 功能特性

### 用户功能
- 用户注册与登录
- 每个用户有唯一的识别码
- 以平面图方式浏览教室座位
- 鼠标选择座位进行预约
- 设置预约时长（1-4小时）
- 查看已预约座位的状态和有效期
- 取消自己的预约

### 管理员功能
- 重置所有座位预约
- 管理用户（查看和删除用户）
- 第一个注册的用户自动成为管理员

### 系统特性
- 实时显示座位状态
- 过期预约自动释放
- 响应式设计，适配不同屏幕尺寸

## 技术栈

### 前端
- HTML5
- CSS3
- JavaScript (ES6+)

### 后端
- Node.js
- Express
- SQLite (数据库)
- JWT (身份验证)
- bcryptjs (密码加密)

## 项目结构

```
classseat/
├── frontend/                # 前端代码
│   ├── index.html           # 主页面
│   ├── styles.css           # 样式文件
│   └── scripts.js           # JavaScript功能实现
├── backend/                 # 后端代码
│   ├── server.js            # 服务器和API实现
│   └── package.json         # 项目依赖配置
├── database/                # 数据库文件
│   └── classroom.db         # SQLite数据库文件（自动生成）
├── .gitignore               # Git忽略配置
└── README.md                # 项目说明文档
```

## 安装和运行

### 前提条件

确保您的系统已安装以下软件：
- [Node.js](https://nodejs.org/) (v14.0或更高版本)
- npm (通常随Node.js一起安装)

### 步骤1：安装后端依赖

打开终端，进入项目的backend目录：

```bash
cd backend
npm install
```

### 步骤2：启动后端服务器

在backend目录下运行：

```bash
npm start
```

或者，在开发模式下运行（支持热重载）：

```bash
npm run dev
```

服务器将在 http://localhost:3001 启动。

### 步骤3：访问系统

打开浏览器，访问 http://localhost:3001 即可使用教室座位预约系统。

## 使用说明

### 用户注册
1. 点击"注册"按钮
2. 输入用户名和密码
3. 系统会自动生成唯一识别码

### 用户登录
1. 点击"登录"按钮
2. 输入用户名和密码

### 预约座位
1. 登录后，选择一个未被预约的座位（绿色）
2. 在下拉菜单中选择预约时长
3. 点击座位确认预约

### 取消预约
1. 点击自己已预约的座位（红色，显示您的用户名）
2. 确认取消预约

### 管理员操作
1. 登录管理员账户
2. 点击"重置所有座位"按钮可以清除所有预约记录
3. 点击"管理用户"按钮可以查看和删除用户

## 注意事项

1. 第一个注册的用户自动获得管理员权限
2. 预约过期后，座位会自动释放
3. 系统每分钟自动更新一次座位状态
4. 管理员可以删除用户，但不能删除自己
5. 删除用户时，该用户的所有预约记录也会被清除

## 开发说明

如果您想对系统进行二次开发，可以按照以下方式修改代码：

- 前端界面修改：编辑 `frontend/index.html` 和 `frontend/styles.css`
- 前端功能修改：编辑 `frontend/scripts.js`
- 后端API修改：编辑 `backend/server.js`
- 数据库结构修改：在 `backend/server.js` 中的 `initDatabase` 函数中修改

## License

MIT